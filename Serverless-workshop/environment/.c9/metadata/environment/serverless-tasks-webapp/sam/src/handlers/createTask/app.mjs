{"filter":false,"title":"app.mjs","tooltip":"/serverless-tasks-webapp/sam/src/handlers/createTask/app.mjs","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":1,"column":0},"end":{"row":42,"column":2},"action":"insert","lines":["import { DynamoDBClient } from '@aws-sdk/client-dynamodb';","import { DynamoDBDocumentClient, PutCommand } from '@aws-sdk/lib-dynamodb';","import { v4 as uuidv4 } from 'uuid';","","const ddbClient = new DynamoDBClient();","const ddbDocClient = DynamoDBDocumentClient.from(ddbClient);","const tableName = process.env.TASKS_TABLE;","","export const handler = async (event) => {","  console.info('received:', event);","","  const body = JSON.parse(event.body);","  const user = event.requestContext.authorizer.principalId;","  const id = uuidv4();","  const title = body.title;","  const bodyText = body.body;","  const createdAt = new Date().toISOString();","","  let dueDate = createdAt;","","  if ('dueDate' in body) {","    dueDate = body.dueDate","  }","","  const params = {","    TableName: tableName,","    Item: { user: `user#${user}`, id: `task#${id}`, title: title, body: bodyText, dueDate: dueDate, createdAt: createdAt }","  };","","  console.info(`Writing data to table ${tableName}`);","  const data = await ddbDocClient.send(new PutCommand(params));","  console.log('Success - item added or updated', data);","","  const response = {","    statusCode: 200,","    headers: {","      'Access-Control-Allow-Origin': '*'","    },","    body: JSON.stringify(data)","  };","  return response;","};"],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":42,"column":2},"end":{"row":42,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":19,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1730350273277,"hash":"c64303d5c3b0f05530dd456ed7bd5adfdb921a66"}